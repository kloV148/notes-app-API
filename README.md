# Notes-app-API
Данный проект представляет из себя пример реализации REST API для
сервиса заметок. 

## Структура проекта 

В папке notes_django лежит django приложение. \
Все переменные окружения хранятся в папке env_vars. Они подключаются
в docker-compose.yaml. \
В docker-compose.yaml прописан запуск django приложения, которое
доступно по порту 8000, а так же база данных postgreSQL. Пользователь 
и пароль для БД задается в notes_db. Для того, чтобы при перезапуске
контейнера данные из бд не пропадали, внутри докера создан volume
notes_db_data, в котором хранятся данные БД. 

## Реализация REST API

API было реализовано с помощью django rest framework. Делать запросы 
к api могут только авторизованные пользователи (в django приложении
включены JWTAuthentication, SessionAuthentication, BasicAuthentication). \
**Эндпоинды**
* api/v1/notes/ 
  * GET - возвращает список всех не архивированных заметок текущего
    пользователя
  * POST - создает заметку. Автоматически в поле creator ставит текущего 
    пользователя
* api/v1/notes/<int:pk>/
  * GET - возвращает информации о заметке с указанным pk. 
    Если заметка не принадлежит текущему пользователю, то отправляется
    ошибка 403. 
  * PATCH - позволяет менять информацию о заметке. Так же возвращает ошибку
    403, если заметка не принадлежит текущему пользователю
  * DELETE - ставит флаг archived=true для заметки с указанным pk. Она 
    больше не появляется в списке заметок пользователя. Аналогично обрабатывает
    сценарий, когда заметка не принадлежит пользователю. 

## Запуск

Для запуска достаточно ввести команду 
```
docker compose up
```

При первом запуске потребуется провести миграции. \ 
Для этого надо зайти в контейнер с django приложением командой 
```
docker exec -it <id of container> sh
```
Узнать id контейнера можно введя команду 
```
docker ps
```

В контейнере надо выполнить команды
```
python manage.py makemigrations
python manage.py migrate
```

Теперь приложение может полноценно функционировать. 